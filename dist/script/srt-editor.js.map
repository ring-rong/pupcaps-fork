{"version":3,"file":"srt-editor.js","sources":["../../src/common/web-server.ts","../../src/script/srt-editor.ts"],"sourcesContent":["import {createServer} from 'http-server';\n\nexport class WebServer {\n    constructor(private readonly rootDir: string) {\n    }\n\n    public async start(relativePath = '') {\n        return new Promise<void>(async (resolve, reject) => {\n            try {\n                const server = createServer({ root: this.rootDir });\n                const port = await WebServer.getFreePort();\n\n                server.listen(port, async () => {\n                    try {\n                        const childProcess = await WebServer.openUrl(`http://127.0.0.1:${port}${relativePath}`);\n\n                        childProcess.on('close', () => {\n                            server.close(() => {\n                                resolve();\n                            });\n                        });\n                    } catch (error) {\n                        reject(error);\n                    }\n                });\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    private static async getFreePort(): Promise<number> {\n        const { default: getPort } = await import('get-port');\n        return getPort();\n    }\n\n    private static async openUrl(url: string) {\n        const { default: open } = await import('open');\n        return open(url, { wait: true });\n    }\n}","import * as path from 'path';\nimport {WebServer} from '../common/web-server';\n\nconst rootDir = path.join(__dirname, '..', '..');\nconst webServer = new WebServer(rootDir);\n\n(async () => {\n    await webServer.start('/dist/editor/index.html');\n})();"],"names":["createServer","path"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;MAEa,SAAS,CAAA;AACW,IAAA,OAAA;AAA7B,IAAA,WAAA,CAA6B,OAAe,EAAA;QAAf,IAAO,CAAA,OAAA,GAAP,OAAO;;AAG7B,IAAA,MAAM,KAAK,CAAC,YAAY,GAAG,EAAE,EAAA;QAChC,OAAO,IAAI,OAAO,CAAO,OAAO,OAAO,EAAE,MAAM,KAAI;AAC/C,YAAA,IAAI;AACA,gBAAA,MAAM,MAAM,GAAGA,uBAAY,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;AACnD,gBAAA,MAAM,IAAI,GAAG,MAAM,SAAS,CAAC,WAAW,EAAE;AAE1C,gBAAA,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,YAAW;AAC3B,oBAAA,IAAI;AACA,wBAAA,MAAM,YAAY,GAAG,MAAM,SAAS,CAAC,OAAO,CAAC,CAAA,iBAAA,EAAoB,IAAI,CAAA,EAAG,YAAY,CAAA,CAAE,CAAC;AAEvF,wBAAA,YAAY,CAAC,EAAE,CAAC,OAAO,EAAE,MAAK;AAC1B,4BAAA,MAAM,CAAC,KAAK,CAAC,MAAK;AACd,gCAAA,OAAO,EAAE;AACb,6BAAC,CAAC;AACN,yBAAC,CAAC;;oBACJ,OAAO,KAAK,EAAE;wBACZ,MAAM,CAAC,KAAK,CAAC;;AAErB,iBAAC,CAAC;;YACJ,OAAO,KAAK,EAAE;gBACZ,MAAM,CAAC,KAAK,CAAC;;AAErB,SAAC,CAAC;;IAGE,aAAa,WAAW,GAAA;QAC5B,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,OAAO,UAAU,CAAC;QACrD,OAAO,OAAO,EAAE;;AAGZ,IAAA,aAAa,OAAO,CAAC,GAAW,EAAA;QACpC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,MAAM,OAAO,MAAM,CAAC;QAC9C,OAAO,IAAI,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;;AAEvC;;ACrCD,MAAM,OAAO,GAAGC,eAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;AAChD,MAAM,SAAS,GAAG,IAAI,SAAS,CAAC,OAAO,CAAC;AAExC,CAAC,YAAW;AACR,IAAA,MAAM,SAAS,CAAC,KAAK,CAAC,yBAAyB,CAAC;AACpD,CAAC,GAAG;;"}